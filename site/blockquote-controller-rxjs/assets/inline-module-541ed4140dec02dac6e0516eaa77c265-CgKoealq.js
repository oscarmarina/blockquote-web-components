var $=Object.defineProperty;var q=(e,r,t)=>r in e?$(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var l=(e,r,t)=>q(e,typeof r!="symbol"?r+"":r,t);import{s as Y,x as B}from"./lit-element-CH2uaVH_.js";class v extends Error{constructor(t){super(t?`${t.length} errors occurred during unsubscription:
${t.map((n,s)=>`${s+1}) ${n.toString()}`).join(`
  `)}`:"");l(this,"errors");this.errors=t,this.name="UnsubscriptionError"}}const _=class _{constructor(r){l(this,"initialTeardown");l(this,"closed",!1);l(this,"_finalizers",null);this.initialTeardown=r}unsubscribe(){let r;if(!this.closed){this.closed=!0;const{initialTeardown:t}=this;if(o(t))try{t()}catch(s){r=s instanceof v?s.errors:[s]}const{_finalizers:n}=this;if(n){this._finalizers=null;for(const s of n)try{O(s)}catch(i){r=r!=null?r:[],i instanceof v?r.push(...i.errors):r.push(i)}}if(r)throw new v(r)}}add(r){var t;r&&r!==this&&(this.closed?O(r):(r&&"add"in r&&r.add(()=>{this.remove(r)}),(t=this._finalizers)!=null||(this._finalizers=new Set),this._finalizers.add(r)))}remove(r){var t;(t=this._finalizers)==null||t.delete(r)}};l(_,"EMPTY",(()=>{const r=new _;return r.closed=!0,r})());let b=_;typeof Symbol.dispose=="symbol"&&(b.prototype[Symbol.dispose]=b.prototype.unsubscribe);function O(e){o(e)?e():e.unsubscribe()}class d extends b{constructor(t,n){var s,i,c,a;super();l(this,"isStopped",!1);l(this,"destination");l(this,"_nextOverride",null);l(this,"_errorOverride",null);l(this,"_completeOverride",null);l(this,"_onFinalize",null);this.destination=t instanceof d?t:Q(t),this._nextOverride=(s=n==null?void 0:n.next)!=null?s:null,this._errorOverride=(i=n==null?void 0:n.error)!=null?i:null,this._completeOverride=(c=n==null?void 0:n.complete)!=null?c:null,this._onFinalize=(a=n==null?void 0:n.finalize)!=null?a:null,this._next=this._nextOverride?D:this._next,this._error=this._errorOverride?j:this._error,this._complete=this._completeOverride?G:this._complete,V(t)&&t.add(this)}next(t){this.isStopped?w(de(t),this):this._next(t)}error(t){this.isStopped?w(fe(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?w(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){var t;this.closed||(this.isStopped=!0,super.unsubscribe(),(t=this._onFinalize)==null||t.call(this))}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const I={onUnhandledError:null,onStoppedNotification:null};function D(e){try{this._nextOverride(e)}catch(r){this.destination.error(r)}}function j(e){try{this._errorOverride(e)}catch(r){this.destination.error(r)}finally{this.unsubscribe()}}function G(){try{this._completeOverride()}catch(e){this.destination.error(e)}finally{this.unsubscribe()}}class J{constructor(r){l(this,"partialObserver");this.partialObserver=r}next(r){const{partialObserver:t}=this;if(t.next)try{t.next(r)}catch(n){m(n)}}error(r){const{partialObserver:t}=this;if(t.error)try{t.error(r)}catch(n){m(n)}else m(r)}complete(){const{partialObserver:r}=this;if(r.complete)try{r.complete()}catch(t){m(t)}}}function Q(e){return new J(!e||o(e)?{next:e!=null?e:void 0}:e)}function w(e,r){const{onStoppedNotification:t}=I;t&&setTimeout(()=>t(e,r))}function V(e){return e&&o(e.unsubscribe)&&o(e.add)}function P({destination:e,...r}){return new d(e,r)}var k;class f{constructor(r){r&&(this._subscribe=r)}subscribe(r){const t=r instanceof d?r:new d(r);return t.add(this._trySubscribe(t)),t}_trySubscribe(r){try{return this._subscribe(r)}catch(t){r.error(t)}}forEach(r){return new Promise((t,n)=>{const s=new d({next:i=>{try{r(i)}catch(c){n(c),s.unsubscribe()}},error:n,complete:t});this.subscribe(s)})}_subscribe(r){}[(k=Symbol.observable)!=null?k:"@@observable"](){return this}pipe(...r){return r.reduce(H,this)}[Symbol.asyncIterator](){let r,t=!1,n,s=!1;const i=[],c=[],a=h=>{for(t=!0,n=h;c.length;){const[y,U]=c.shift();U(h)}},p=()=>{for(s=!0;c.length;){const[h]=c.shift();h({value:void 0,done:!0})}};return{next:()=>(r||(r=this.subscribe({next:h=>{if(c.length){const[y]=c.shift();y({value:h,done:!1})}else i.push(h)},error:a,complete:p})),i.length?Promise.resolve({value:i.shift(),done:!1}):s?Promise.resolve({value:void 0,done:!0}):t?Promise.reject(n):new Promise((h,y)=>{c.push([h,y])})),throw:h=>(r==null||r.unsubscribe(),a(h),Promise.reject(h)),return:()=>(r==null||r.unsubscribe(),p(),Promise.resolve({value:void 0,done:!0})),[Symbol.asyncIterator](){return this}}}}function H(e,r){return r(e)}function m(e){setTimeout(()=>{const{onUnhandledError:r}=I;if(r)r(e);else throw e})}function N(e){switch(ne(e)){case u.Own:return e;case u.InteropObservable:return W(e);case u.ArrayLike:return X(e);case u.Promise:return Z(e);case u.AsyncIterable:return z(e);case u.Iterable:return K(e);case u.ReadableStreamLike:return ee(e)}}function W(e){return new f(r=>{var n;const t=e[(n=Symbol.observable)!=null?n:"@@observable"]();if(o(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function X(e){return new f(r=>{te(e,r)})}function Z(e){return new f(r=>{e.then(t=>{r.closed||(r.next(t),r.complete())},t=>r.error(t)).then(null,m)})}function K(e){return new f(r=>{for(const t of e)if(r.next(t),r.closed)return;r.complete()})}function z(e){return new f(r=>{re(e,r).catch(t=>r.error(t))})}function ee(e){return z(ie(e))}async function re(e,r){for await(const t of e)if(r.next(t),r.closed)return;r.complete()}function te(e,r){const t=e.length;for(let n=0;n<t;n++){if(r.closed)return;r.next(e[n])}r.complete()}var u;(function(e){e[e.Own=0]="Own",e[e.InteropObservable=1]="InteropObservable",e[e.ArrayLike=2]="ArrayLike",e[e.Promise=3]="Promise",e[e.AsyncIterable=4]="AsyncIterable",e[e.Iterable=5]="Iterable",e[e.ReadableStreamLike=6]="ReadableStreamLike"})(u||(u={}));function ne(e){if(e instanceof f)return u.Own;if(le(e))return u.InteropObservable;if(g(e))return u.ArrayLike;if(ce(e))return u.Promise;if(se(e))return u.AsyncIterable;if(ue(e))return u.Iterable;if(oe(e))return u.ReadableStreamLike;throw new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function o(e){return typeof e=="function"}function se(e){return Symbol.asyncIterator&&o(e==null?void 0:e[Symbol.asyncIterator])}async function*ie(e){const r=e.getReader();try{for(;;){const{value:t,done:n}=await r.read();if(n)return;yield t}}finally{r.releaseLock()}}function oe(e){return o(e==null?void 0:e.getReader)}function ce(e){return o(e==null?void 0:e.then)}function le(e){var r;return o(e[(r=Symbol.observable)!=null?r:"@@observable"])}function ue(e){return o(e==null?void 0:e[Symbol.iterator])}function g(e){return e&&typeof e.length=="number"&&!o(e)}function ae(e){return!!e&&(e instanceof f||o(e.lift)&&o(e.subscribe))}const he=x("C",void 0,void 0);function fe(e){return x("E",void 0,e)}function de(e){return x("N",e,void 0)}function x(e,r,t){return{kind:e,value:r,error:t}}class be extends f{constructor(){super();l(this,"_closed",!1);l(this,"_observerCounter",0);l(this,"currentObservers",new Map);l(this,"observerSnapshot");l(this,"hasError",!1);l(this,"thrownError",null)}get closed(){return this._closed}get observers(){var t;return(t=this.observerSnapshot)!=null?t:this.observerSnapshot=Array.from(this.currentObservers.values())}_clearObservers(){this.currentObservers.clear(),this.observerSnapshot=void 0}next(t){if(!this._closed){const{observers:n}=this,s=n.length;for(let i=0;i<s;i++)n[i].next(t)}}error(t){if(!this._closed){this.hasError=this._closed=!0,this.thrownError=t;const{observers:n}=this,s=n.length;for(let i=0;i<s;i++)n[i].error(t);this._clearObservers()}}complete(){if(!this._closed){this._closed=!0;const{observers:t}=this,n=t.length;for(let s=0;s<n;s++)t[s].complete();this._clearObservers()}}unsubscribe(){this._closed=!0,this._clearObservers()}get observed(){return this.currentObservers.size>0}_subscribe(t){return this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){if(this.hasError||this._closed)return b.EMPTY;const{currentObservers:n}=this,s=this._observerCounter++;return n.set(s,t),this.observerSnapshot=void 0,t.add(()=>{n.delete(s),this.observerSnapshot=void 0}),t}_checkFinalizedStatuses(t){const{hasError:n,thrownError:s,_closed:i}=this;n?t.error(s):i&&t.complete()}asObservable(){return new f(t=>this.subscribe(t))}}function me(){}function C(e){return r=>new f(t=>{let n=0;r.subscribe(P({destination:t,next:s=>{t.next(e(s,n++))}}))})}const{isArray:pe}=Array;function ye(e,r){return pe(r)?e(...r):e(r)}function _e(e){return C(r=>ye(e,r))}const ve=["addListener","removeListener"],we=["addEventListener","removeEventListener"],Se=["on","off"];function R(e,r,t,n){if(o(t)&&(n=t,t=void 0),n)return _e(n)(R(e,r,t));const s=M(e)||F(e)||T(e);if(!s&&!g(e))throw new TypeError("Invalid event target");return new f(i=>{const c=(...a)=>i.next(1<a.length?a:a[0]);if(s)A(c,i,e,r,t);else for(let a=0;a<e.length&&!i.closed;a++){const p=e[a];A(c,i,p,r,t)}})}function A(e,r,t,n,s){const[i,c]=Ee(t);if(!i||!c)throw new TypeError("Invalid event target");t[i](n,e,s),r.add(()=>t[c](n,e,s))}function Ee(e){return T(e)?we:M(e)?ve:F(e)?Se:[]}function M(e){return o(e.addListener)&&o(e.removeListener)}function F(e){return o(e.on)&&o(e.off)}function T(e){return o(e.addEventListener)&&o(e.removeEventListener)}function xe(e){return r=>new f(t=>{N(e).subscribe(P({destination:t,next:()=>t.complete(),complete:me})),!t.closed&&r.subscribe(t)})}const S=Symbol("unsubscribe"),E=Symbol("subscriptions");class Oe{constructor(r){this[S]=new be,this[E]=new Map,(this.host=r).addController(this)}subscribe(r,t){var i;if(!ae(t))throw new Error("Invalid Observable!");const n=this[E].get(r);if(n){if((n==null?void 0:n.stream$)===t)return t;(i=n==null?void 0:n.subscription)==null||i.unsubscribe()}const s=t.pipe(xe(this[S])).subscribe(c=>{r in this.host&&(this.host[r]=c),this.host.requestUpdate()});return this[E].set(r,{stream$:t,subscription:s}),t}hostDisconnected(){this[S].next(null)}}class L extends Y{static get is(){return"blockquote-controller-rxjs-demo"}static get properties(){return{_pos:{type:Object,attribute:!1}}}constructor(){super(),this.rx=new Oe(this),this._pos={x:0,y:0},this.values$=R(window,"mousemove").pipe(C(({clientX:r,clientY:t})=>({x:r,y:t})))}connectedCallback(){super.connectedCallback(),this.rx.subscribe("_pos",this.values$)}render(){return B`
            <p>The mouse is at:</p>
            <pre>
              x: ${this._pos.x}
              y: ${this._pos.y}
            </pre
            >
          `}}window.customElements.define(L.is,L);
